"use strict";
var import_protocol = require("@livekit/protocol");
var import_vitest = require("vitest");
var import_grants = require("./grants");
(0, import_vitest.describe)("ClaimGrants are parsed correctly", () => {
  (0, import_vitest.it)("parses TrackSource correctly to strings", () => {
    var _a;
    const grant = {
      canPublishSources: [
        import_protocol.TrackSource.CAMERA,
        import_protocol.TrackSource.MICROPHONE,
        import_protocol.TrackSource.SCREEN_SHARE,
        import_protocol.TrackSource.SCREEN_SHARE_AUDIO
      ]
    };
    const claim = { video: grant };
    const jwtPayload = (0, import_grants.claimsToJwtPayload)(claim);
    (0, import_vitest.expect)(jwtPayload.video).toBeTypeOf("object");
    (0, import_vitest.expect)((_a = jwtPayload.video) == null ? void 0 : _a.canPublishSources).toEqual([
      "camera",
      "microphone",
      "screen_share",
      "screen_share_audio"
    ]);
  });
});
//# sourceMappingURL=grants.test.cjs.map