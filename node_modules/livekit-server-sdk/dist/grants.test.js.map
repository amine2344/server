{"version":3,"sources":["../src/grants.test.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2024 LiveKit, Inc.\n//\n// SPDX-License-Identifier: Apache-2.0\nimport { TrackSource } from '@livekit/protocol';\nimport { describe, expect, it } from 'vitest';\nimport type { ClaimGrants, VideoGrant } from './grants';\nimport { claimsToJwtPayload } from './grants';\n\ndescribe('ClaimGrants are parsed correctly', () => {\n  it('parses TrackSource correctly to strings', () => {\n    const grant: VideoGrant = {\n      canPublishSources: [\n        TrackSource.CAMERA,\n        TrackSource.MICROPHONE,\n        TrackSource.SCREEN_SHARE,\n        TrackSource.SCREEN_SHARE_AUDIO,\n      ],\n    };\n\n    const claim: ClaimGrants = { video: grant };\n\n    const jwtPayload = claimsToJwtPayload(claim);\n    expect(jwtPayload.video).toBeTypeOf('object');\n    expect(jwtPayload.video?.canPublishSources).toEqual([\n      'camera',\n      'microphone',\n      'screen_share',\n      'screen_share_audio',\n    ]);\n  });\n});\n"],"mappings":"AAGA,SAAS,mBAAmB;AAC5B,SAAS,UAAU,QAAQ,UAAU;AAErC,SAAS,0BAA0B;AAEnC,SAAS,oCAAoC,MAAM;AACjD,KAAG,2CAA2C,MAAM;AATtD;AAUI,UAAM,QAAoB;AAAA,MACxB,mBAAmB;AAAA,QACjB,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,YAAY;AAAA,MACd;AAAA,IACF;AAEA,UAAM,QAAqB,EAAE,OAAO,MAAM;AAE1C,UAAM,aAAa,mBAAmB,KAAK;AAC3C,WAAO,WAAW,KAAK,EAAE,WAAW,QAAQ;AAC5C,YAAO,gBAAW,UAAX,mBAAkB,iBAAiB,EAAE,QAAQ;AAAA,MAClD;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH,CAAC;","names":[]}